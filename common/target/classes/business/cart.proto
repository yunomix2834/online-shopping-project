syntax = "proto3";
package onlineshopping.v1;
option java_multiple_files = true;
option java_package = "com.common.grpc";
option java_outer_classname = "CartProto";
import "google/protobuf/empty.proto";
import "common.proto";

message CartGetOrCreateRequest {
  string user_id = 1;
}
message CartView {
  string user_id = 1;
  repeated CartItemView items = 2;
  string subtotal = 3;
  string discount_amount = 4;
  string shipping_fee = 5;
  string total = 6;
}
message CartItemView {
  string id = 1;
  string variant_id = 2;
  string sku = 3;
  string product_name = 4;
  string price = 5;
  int32 quantity = 6;
  string line_total = 7;
}
message CartAddItemRequest {
  string user_id = 1;
  string variant_id = 2;
  int32 quantity = 3;
}
message CartUpdateQtyRequest {
  string cart_item_id = 1;
  int32 quantity = 2;
}
message CartRemoveItemRequest {
  string cart_item_id = 1;
}
message CartClearRequest {
  string user_id = 1;
}
message CartListRequest {
  string user_id = 1;
}
message CartApplyCodeRequest {
  string user_id = 1;
  string code = 2;
  string at = 3;
}
message CartMergeRequest {
  string from_user_id = 1;
  string to_user_id = 2;
}

service CartService {
  rpc GetOrCreate(CartGetOrCreateRequest) returns (CartView);
  rpc AddItem(CartAddItemRequest) returns (google.protobuf.Empty);
  rpc UpdateQty(CartUpdateQtyRequest) returns (google.protobuf.Empty);
  rpc RemoveItem(CartRemoveItemRequest) returns (google.protobuf.Empty);
  rpc Clear(CartClearRequest) returns (google.protobuf.Empty);
  rpc List(CartListRequest) returns (CartView);
  rpc ApplyCode(CartApplyCodeRequest) returns (CartView);
  rpc Merge(CartMergeRequest) returns (google.protobuf.Empty);
}
